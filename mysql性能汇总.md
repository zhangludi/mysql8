# 影响数据的性能

## [服务器硬件 cpu/内存/磁盘IO](#cpu)

## [服务器操作系统](#os)

## [数据库存储引擎的选择](#mysql)
	
	MYISM 不支持事务,表级锁
	
	INNODB 事务存储引擎,完美的支持行级锁,事务ACID
	
## [数据库参数配置](#mysql-param)

## [数据库结构设计和sql语句](#mysql-sql)


<a id="cpu"> 服务器硬件 cpu/内存/磁盘IO</a>

## 一.cpu资源和可利用内存大小

### cpu 密集型

	衡量数据库处理能力的指标QPS
	
	64位不要使用32的服务器版本
	
### 内存

	选择服务器主板支持的最大内存频率
	
	内存越多越好,但也是限制
	
	多余的内存会增加操作系统等其他服务性能
	
 **内存购买**
 
 		组成购买升级
		
		每个频道的内存:相同的品牌,颗粒,频率,电压,校验,技术和型号
		
		单条容量尽可能大
		
## 二.磁盘的配置和选择

	使用传统的机器硬盘
	
	使用RAID增强传统机器硬盘的性能
	
	使用固态硬盘SSD和PCI-e卡
	
	使用网络存储NAS和SAN
	
	
### 使用传统的机器硬盘

	空间大,价格低,最常见,读写速度慢
	
#### 传统机器硬盘读取数据的过程

	1.移动磁头到磁盘 表面上的正确位置
	
	2.等待磁盘旋转,使所需要大的数据在磁头之下
	
	3.等待磁盘旋转过去,所有所需的数据都被磁头读出

#### 如何使用机器硬盘
	
	存储容量
	
	传输速度
	
	访问时间
	
	主轴转速
	
	物理尺寸
	
### 使用RAID增强传统机器硬盘的性能

	磁盘冗余队列的简称
		remdundant arrays of independent disks: 简单来说,RAID的作用就是可以把多个容量较小的磁盘组成一组更大的磁盘,并提供数据冗余来保证数据完整性的技术
		
#### RAID级别

		1. RAID0最早出现,也简称数据条带
			
			组成磁盘阵列中最简单的一种,只需要2块硬盘,成本低但没有提供冗余或修复错误的功能
		
		2.RAID1磁盘镜像
			
			原理上,一个磁盘的数据镜像到另一个磁盘上,也就是说数据在写入一个磁盘中同时也会在另一个闲置的磁盘上生成镜像文件,在不影响性能的情况下最大限度的保证系统的可靠性和可修复性
			
		3.RAID5 分布式奇偶校验磁盘阵列
			
			通过分布式奇偶块把数据分散到多个磁盘上,这样任何一个盘的数据失效都可以从奇偶块中重建,但是如果两块磁盘同时失效,则整个卷的数据都无法恢复==> 磁盘损坏,IO大幅度下降
		
		RAID10 分片镜像
		
			他是先对磁盘做RAID1之后在对RAID1的磁盘做RAID0,所以对读写有良好的性能,相对RAID5重建起来更简单,速度更快
		


| 等级  |特点  | 是否冗余 |盘数 | 读 | 写|
| :------------ |:---------------:| -----:|-----:|-----:|-----:|
| RAID0     | 便宜,快速,危险 | 否 |  N | 快 | 快 |
| RAID1       | 高速度,简单,安全        |  有 |  2 | 快 | 慢 |
| RAID5  |  安全,成本折中    |  N+1| 有 | 快 | 取决于最慢的磁盘|
| RAID10 (适合读写频繁)      | 贵,高速,安全      |  有 |  2N | 快 | 快 |    











